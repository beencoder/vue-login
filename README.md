# 🔐 AuthFlow: Firebase & Pinia 기반 전역 인증 시스템

> **여기저기 흩어져 있던 로그인 로직을 하나로 모으고, 새로고침 시에도 로그인 상태가 안정적으로 유지되도록 구조를 개선한 리팩토링 프로젝트입니다.**

## 🔗 Link

- **Live Demo:** [https://auth-flow-blond.vercel.app/](https://auth-flow-blond.vercel.app/)

## 🛠 Tech Stack

- **Framework:** Vue 3 (Composition API)
- **State Management:** Pinia (전역 상태 관리)
- **Backend Service:** Firebase v10 (인증 및 데이터베이스)
- **Routing:** Vue Router (페이지 권한 제어)
- **Library:** pinia-plugin-persistedstate (로그인 세션 유지)

## 🔥 핵심 구현 사항

- **인증 데이터 통합:** Pinia를 사용해 유저 정보와 로그인 상태를 한곳에서 관리하여, 어떤 컴포넌트에서도 실시간으로 동일한 유저 데이터를 사용하도록 구현
- **실시간 상태 동기화:** Firebase의 인증 감시 리스너를 앱 최상단에 배치하여, 로그인/로그아웃 등 유저 상태 변화를 앱 전체에 즉각적으로 반영
- **페이지 접근 권한 제어:** 로그인이 필요한 페이지(수정 등)와 비로그인 전용 페이지(로그인/가입 등)를 구분하여 상황에 맞는 자동 리다이렉트 로직 구축
- **다이내믹 프로필 반영:** 회원가입이나 정보 수정 시 변경된 닉네임이 헤더와 메인 화면 등에 즉시 업데이트되도록 반응형 로직 적용

## 📋 핵심 트러블슈팅 (Refactoring)

### 1. 새로고침 시 로그인 정보가 순간적으로 사라지는 현상 해결

- **문제:** 새로고침을 하면 Firebase가 유저 정보를 확인하기도 전에 화면이 먼저 그려져서, 로그인 상태임에도 아주 잠깐 '방문자'라고 뜨거나 메인으로 튕겨나가는 이슈 발생.
- **해결:** Firebase가 유저 정보를 확실히 확인한 다음에 앱이 켜지도록 실행 순서를 조정하여, 화면 깜빡임 없이 안정적으로 로그인 상태가 유지되도록 개선.

### 2. 닉네임 수정 시 화면마다 정보가 다르게 나오는 문제 해결

- **문제:** 회원 정보를 수정해도 상단 헤더의 닉네임은 그대로인 것처럼, 화면마다 유저 정보가 따로 놀아 데이터가 일치하지 않는 현상 발생.
- **해결:** 각각의 화면에서 관리하던 데이터를 전역 창고(Pinia) 하나로 통합. 정보를 수정하면 이 창고의 데이터만 바꾸면 모든 화면이 동시에 변하도록 구조를 변경하여 데이터 불일치 해결.

### 3. 중복되는 코드 정리 및 유지보수성 향상

- **문제:** 로그인, 회원가입, 정보수정 등 페이지마다 비슷한 인증 코드가 중복으로 들어가 있어 코드가 지저분해지고 수정 시 모든 파일을 뒤져야 하는 불편함 발생.
- **해결:** 중복된 로직을 전역 스토어의 공통 함수로 합치고, 각 페이지는 필요한 데이터만 불러다 쓰도록 간소화. 전체 코드량을 약 40% 줄여 작업 효율과 가독성 확보.

### 4. 페이지 이동 시 브라우저 부하 및 성능 최적화

- **문제:** 메인 페이지의 화려한 마우스 효과가 다른 페이지로 이동한 후에도 백그라운드에서 계속 돌아가, 브라우저가 느려지거나 보이지 않는 곳에서 에러가 쌓이는 현상 확인.
- **해결:** 페이지를 떠나는 시점에 등록된 모든 마우스 이벤트를 확실히 종료(Cleanup)하도록 처리. 불필요한 리소스 낭비를 막아 사이트의 전반적인 안정성 향상.

## 📂 Project Structure

```text
src/
├── stores/          # 로그인 상태 및 유저 정보를 관리하는 데이터 저장소
├── router/          # 페이지 이동 경로 및 접근 권한 설정
├── components/      # 로그인, 회원가입, 프로필 수정 등 주요 기능 화면
├── services/        # Firebase 초기 설정 및 연동 로직
├── App.vue          # 전체 레이아웃 및 유저 상태 감시용 최상단 컴포넌트
└── main.js          # 앱 실행 및 인증 상태에 따른 초기화 제어